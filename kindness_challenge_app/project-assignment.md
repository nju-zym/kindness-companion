# **Kindness Companion (善意伴侣) 应用 \- 项目方案**

## **1\. 项目概述与目标**

**项目名称:** Kindness Companion (善意伴侣)

**核心理念:** 打造一个温暖、个性化且易于使用的桌面应用程序，鼓励用户发现、实践并反思日常善行，通过技术传递善意，培养积极心态和社群连接感，体现“代码有温度”。

**目标用户:** 希望培养善行习惯、寻求积极生活方式、愿意与社区分享（可选）善意体验的个人。

**大赛主题契合:**

* **善意:** 应用的核心是鼓励和记录善行。
* **守护:** 通过提醒、进度追踪和积极反馈机制守护用户的善意实践。
* **温度:** 通过情感化设计、个性化体验和可选的社区互动营造温暖氛围。
* **技术应用:** 核心功能使用成熟桌面技术，可选功能探索 AI/LLM 集成。

## **2\. 技术栈**

* **语言:** Python 3.10+
* **GUI:** PySide6 (Qt for Python) \- 提供丰富的原生桌面体验 1。LGPL 许可适合此类项目 3。
* **本地数据库:** SQLite3 \- 用于存储用户账户、挑战订阅、打卡记录、本地设置等核心数据 \[readme.md\]。
* **任务调度:** APScheduler 或 Python 内置 sched \- 用于实现本地提醒功能 \[readme.md\]。
* **后端 API (可选社区/AI 功能):** Flask / FastAPI \- 用于构建一个轻量级 API，处理可选的匿名分享、AI 请求代理等 7。
* **AI 服务 (可选):** OpenAI API (或其他类似服务) \- 用于可选的个性化建议、反思提示生成、图像生成等 12。
* **版本控制:** Git \+ GitHub/GitLab
* **测试框架:** pytest

## **3\. 项目框架 (修订版)**

kindness\_companion\_app/
├── frontend/                  \# 前端模块 (PySide6 GUI)
│   ├── \_\_init\_\_.py
│   ├── main\_window.py         \# 主应用窗口框架与导航
│   ├── auth\_ui.py             \# 用户注册/登录界面
│   ├── challenge\_ui.py        \# 挑战浏览、订阅、详情界面
│   ├── checkin\_ui.py          \# 每日打卡、简短反思记录界面
│   ├── progress\_ui.py         \# 个人进度、成就(徽章)展示界面
│   ├── reminder\_ui.py         \# 提醒设置界面
│   ├── profile\_ui.py          \# 用户设置界面 (未来可扩展)
│   ├── community\_ui.py        \# \[可选\] 社区善意墙展示界面
│   └── widgets/               \# 可重用自定义控件 (如情感化按钮、进度条)
│       └──...
├── backend/                   \# 本地后端逻辑
│   ├── \_\_init\_\_.py
│   ├── database\_manager.py    \# SQLite 管理 (表结构, CRUD)
│   ├── user\_manager.py        \# 本地用户认证、会话管理
│   ├── challenge\_manager.py   \# 挑战数据管理、订阅逻辑
│   ├── progress\_tracker.py    \# 打卡记录、成就解锁逻辑
│   ├── reminder\_scheduler.py  \# 本地提醒调度
│   └── utils.py               \# 本地工具函数 (日期, 日志等)
├── api/                       \# \[可选\] 轻量级后端 API (Flask/FastAPI)
│   ├── \_\_init\_\_.py
│   ├── app.py                 \# API 应用实例与路由
│   ├── community\_handler.py   \# \[可选\] 处理匿名分享、获取善意墙数据
│   ├── ai\_handler.py          \# \[可选\] 代理对外部 AI API 的调用
│   └── api\_utils.py           \# API 相关工具函数
├── resources/                 \# 应用资源 (图标, 温暖风格图片, 样式表)
│   ├── icons/
│   ├── images/
│   └── styles/
├── tests/                     \# 单元测试
│   ├── test\_backend/
│   └── test\_api/              \# \[可选\] API 测试
├── main.py                    \# 应用启动入口
├── requirements.txt           \# Python 依赖列表
├── config.py                  \# 配置文件 (如 API Keys 的安全处理方式)
└── README.md                  \# 项目说明文档 (本文件更新版)
.gitignore

## **4\. 功能模块详解 (区分核心与可选)**

### **4.1. 核心功能 (MVP \- 必须实现)**

| 模块 (Frontend/Backend)                                       | 功能描述                                                                                         | "温度"体现                                           | 技术要点                                              |
| :------------------------------------------------------------ | :----------------------------------------------------------------------------------------------- | :--------------------------------------------------- | :---------------------------------------------------- |
| **用户认证** (auth\_ui.py, user\_manager.py)                  | 安全的本地注册、登录、密码哈希存储。                                                             | 提供安全感、个性化体验的基础。                       | SQLite, hashlib.                                      |
| **挑战浏览与订阅** (challenge\_ui.py, challenge\_manager.py)  | 展示预设的善行挑战列表（可按类别筛选，如环境、社区、个人成长），用户可订阅/取消。                | 挑战描述富含情感引导，界面视觉温暖。                 | PySide6 列表/网格视图, SQLite。                       |
| **每日打卡与简易反思** (checkin\_ui.py, progress\_tracker.py) | 用户完成挑战后进行打卡；提供一个**非常简单**的文本框，鼓励用户记录一句话感想（可选，本地存储）。 | 打卡动画反馈（如点亮星星、小树成长），鼓励积极反思。 | PySide6 按钮、文本框, SQLite。                        |
| **进度追踪与成就** (progress\_ui.py, progress\_tracker.py)    | 可视化展示已完成的挑战数量、连续打卡天数等；解锁基于本地进度的成就徽章（设计需温暖、有意义）。   | 视觉化的正向反馈，成就感激励。                       | PySide6 图表控件 (或简单文本展示), 预设徽章图片资源。 |
| **基础提醒设置** (reminder\_ui.py, reminder\_scheduler.py)    | 用户可设置简单的每日提醒时间，以鼓励坚持。                                                       | 体现对用户习惯养成的“守护”。                         | PySide6 时间选择控件, APScheduler/sched。             |
| **情感化 UI/UX 设计** (贯穿 frontend/)                        | 采用温暖色调、圆角设计、积极的图标和微交互动画；优化布局和导航，降低认知负荷 6。                 | 直接营造应用的“温度感”和愉悦体验。                   | PySide6 样式表 (QSS), 自定义控件, 动画框架 (可选)。   |
| **本地数据存储** (database\_manager.py)                       | 使用 SQLite 安全存储所有核心用户数据。                                                           | 保障用户隐私的基础。                                 | Python sqlite3 模块。                                 |

### **4.2. 可选功能 (Optional \- 增强功能，可在核心功能完成后选择性实现)**

| 模块 (Frontend/Backend/API)                                           | 功能描述                                                                            | "温度"/创新性体现            | 技术要点                                                                               | 复杂度/风险                                 |
| :-------------------------------------------------------------------- | :---------------------------------------------------------------------------------- | :--------------------------- | :------------------------------------------------------------------------------------- | :------------------------------------------ |
| **AI 驱动的挑战建议** (challenge\_ui.py, ai\_handler.py (API))        | 基于用户已完成的挑战或简单偏好，通过后端 API 调用 LLM 生成个性化的善行建议 23。     | 个性化关怀，提升新颖度。     | PySide6 调用后端 API, Flask/FastAPI 代理 LLM API 调用, OpenAI API 25。                 | 中 (API 集成, Prompt 设计, 成本, 伦理 27)   |
| **AI 生成的反思提示** (checkin\_ui.py, ai\_handler.py (API))          | 在用户打卡反思时，通过 API 调用 LLM 生成引导性问题，鼓励更深层思考 23。             | 促进自我关怀和成长，创新性。 | 同上。                                                                                 | 中 (同上, 需特别注意隐私 32)                |
| **AI 生成的成就徽章** (progress\_ui.py, ai\_handler.py (API))         | 当用户解锁成就时，调用 Text-to-Image API 生成独特的、个性化的徽章图片 12。          | 惊喜感，视觉独特性，创新性。 | PySide6 显示图片, Flask/FastAPI 代理 Text-to-Image API 调用, OpenAI DALL-E API 等 12。 | 中高 (API 集成, 成本, 图片生成质量控制)     |
| **匿名善意墙 (只读)** (community\_ui.py, community\_handler.py (API)) | 展示一个从后端 API 获取的、匿名的、由其他用户分享的善行故事或感想列表 37。          | 营造社区温暖氛围，榜样激励。 | PySide6 列表视图, Flask/FastAPI 提供数据接口, 需数据库存储分享内容 (非 SQLite)。       | 中 (需要独立后端数据库和 API, 内容审核机制) |
| **匿名分享善行故事** (checkin\_ui.py, community\_handler.py (API))    | 允许用户在打卡时选择将自己的（匿名化处理后的）感想提交到后端 API，供善意墙展示 37。 | 贡献社区，分享正能量。       | PySide6 按钮触发 API 调用, Flask/FastAPI 接收并存储数据。                              | 中 (同上, 需明确告知用户匿名规则和用途)     |
| **高级提醒** (reminder\_ui.py, reminder\_scheduler.py)                | 提供更灵活的提醒设置，如按挑战类别、特定日期等。                                    | 更个性化的“守护”。           | PySide6 复杂控件, APScheduler 高级功能。                                               | 低                                          |

**建议实现顺序:**

1. 完成所有核心 MVP 功能。
2. 优先考虑实现 **情感化 UI/UX** 的深度打磨。
3. 如果时间和资源允许，可选择性添加 **AI 驱动的挑战建议** 或 **AI 生成的反思提示**，这两项能较好地提升个性化和创新性，且技术上相对可控（主要是 API 调用）25。
4. **社区功能** (善意墙、分享) 能显著提升“温度”，但技术复杂度较高（需要独立后端和数据库），建议作为最高优先级可选功能或后续迭代目标 37。
5. **AI 生成徽章** 趣味性强，但优先级可能低于其他 AI 功能。

## **5\. README.md (草稿)**

# **Kindness Companion (善意伴侣) 应用**

一个旨在通过技术传递善意、鼓励用户实践并反思日常善行的桌面应用程序。本项目旨在参与“代码有温度 ——用软件守护每一份善意”竞赛。

## **✨ 核心特性 (MVP)**

* **💖 情感化设计:** 温暖的视觉风格、流畅的交互体验，营造积极氛围。
* **🎯 善行挑战:** 浏览、订阅和追踪多样化的善行挑战。
* **✍️ 每日打卡与反思:** 记录善行完成情况，并进行简短的个人反思（本地存储）。
* **🏆 进度与成就:** 可视化追踪您的善行旅程，解锁充满鼓励的成就徽章。
* **⏰ 基础提醒:** 设置每日提醒，帮助养成善行习惯。
* **🔒 本地优先与隐私:** 核心数据存储在本地 SQLite 数据库，尊重用户隐私。

## **🚀 可选特性 (未来增强)**

* **🤖 AI 智能建议:** \[可选\] 获取由 AI 生成的个性化善行挑战建议。
* **💡 AI 反思引导:** \[可选\] 在打卡时获得 AI 提供的深度反思问题。
* **🎨 AI 生成徽章:** \[可选\] 解锁由 AI 创造的独一无二的成就徽章。
* **🤝 匿名善意墙:** \[可选\] 查看社区分享的匿名善意故事，感受集体温暖 (只读)。
* **💌 匿名分享:** \[可选\] 选择性地将您的匿名善行感想分享到善意墙。
* **🔔 高级提醒:** \[可选\] 更灵活的提醒设置选项。

## **🛠️ 技术栈**

* **语言:** Python 3.10+
* **GUI:** PySide6
* **本地数据库:** SQLite3
* **任务调度:** APScheduler / sched
* **后端 API (可选):** Flask / FastAPI
* **AI 服务 (可选):** OpenAI API (或同类服务)
* **测试:** pytest

## **🔧 环境配置与运行**

\*(参考原 readme.md 中的 Conda 环境配置指南，并更新 requirements.txt)\*bash

# **1\. 创建并激活 Conda 环境**

conda create \-n kindness\_companion python=3.10
conda activate kindness\_companion

# **2\. 安装依赖**

pip install \-r requirements.txt

# **3\. \[可选\] 配置 API 密钥**

# **\- 如果使用 AI 或社区功能，请按照 config.py 中的说明安全配置 API 密钥。**

# **\- 切勿将密钥直接写入代码或提交到版本控制！**

# **4\. 运行应用**

python main.py

\#\# 📂 项目结构

\*(在此处插入更新后的项目框架图)\*

\#\# 🤝 贡献指南

\*(可添加贡献流程说明)\*

\#\# 📜 开源许可

本项目采用 LGPLv3 许可证。详情请见(LICENSE) 文件。PySide6 本身也使用 LGPLv3 等许可 \[3, 5\]。

\#\# ⚠️ 伦理与隐私声明

\*   \*\*数据本地优先:\*\* 核心用户数据默认存储在本地设备。
\*   \*\*可选功能透明:\*\* 对于需要网络连接、调用外部 API (AI 或社区后端) 的可选功能，应用将在使用前明确告知用户，并解释数据用途。
\*   \*\*AI 使用说明:\*\* 如果启用 AI 功能，将明确告知用户 AI 的参与及其局限性 \[28, 29, 40, 41, 22, 24, 42, 30\]。
\*   \*\*匿名化处理:\*\* 对于可选的社区分享功能，将采取匿名化措施保护用户身份。用户对是否分享拥有完全控制权。
\*   \*\*数据安全:\*\* 尽力采取合理的安全措施保护本地数据和 API 通信（如适用）。对于敏感的心理健康相关数据处理，需格外谨慎 \[32, 43, 33, 34, 35, 36, 44\]。

## **6\. 伦理考量与数据隐私**

* **透明度:** 必须清晰告知用户哪些功能使用了 AI，以及 AI 的作用和局限性 28。如果涉及后端 API，需说明数据传输和处理。
* **用户同意:** 对于可选的 AI 功能和社区分享功能，必须获得用户的明确同意 (Opt-in)。用户应能随时启用或禁用这些功能。
* **数据最小化:** 只收集实现核心功能和用户选择的可选功能所必需的数据。核心功能优先使用本地存储。
* **匿名化:** 社区分享功能必须进行严格的匿名化处理，确保无法反推用户身份。
* **安全性:** 保护本地 SQLite 数据库的安全。如果使用后端 API，需确保 API 通信安全 (HTTPS)，并安全存储 API 密钥（绝不硬编码在客户端）45。对用户密码进行安全的哈希存储。
* **AI 偏见:** 认识到 AI 模型可能存在的偏见，避免生成不当或歧视性的建议或内容 32。
* **避免过度承诺:** AI 功能应定位为辅助工具，而非替代专业心理咨询或人类情感支持 23。

## **7\. 开发计划与时间估算 (示例 \- 需根据团队调整)**

* **第 1 周:** 环境搭建，核心后端逻辑 (数据库模型, 用户管理基础)，主窗口框架搭建，用户认证 UI。
* **第 2 周:** 核心功能开发 (挑战浏览/订阅, 打卡, 基础进度/成就)，情感化 UI 初步设计与应用。
* **第 3 周:** 核心功能完善与测试，提醒功能实现，情感化 UI 细节打磨。**(达成 MVP)**
* **第 4 周 (可选):** 选择 1-2 个优先级最高的可选功能进行开发 (如 AI 建议或反思提示)，进行集成测试，准备演示。

**此方案在原项目基础上，强化了“温度”和创新性，同时通过明确区分核心与可选功能，并推荐优先实现技术复杂度较低的 AI 集成方式，来保证项目在有限时间内的可行性。**
